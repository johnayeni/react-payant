{"version":3,"sources":["../src/Payant.js"],"names":[],"mappings":"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","file":"payant.min.js","sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Payant(props) {\n  const initialState = {\n    ...props,\n    scriptLoaded: null,\n    class: props.class || props.className || '',\n  };\n  const [payantState, setPayantState] = useState(initialState);\n\n  const payWithPayant = useCallback(() => {\n    payantState.scriptLoaded &&\n      payantState.scriptLoaded.then(() => {\n        const payantOptions = {\n          key: payantState.payantPublicKey,\n          reference_code: payantState.reference,\n          amount: payantState.amount,\n          client: payantState.client,\n          client_id: payantState.client_id,\n          due_date: payantState.due_date,\n          fee_bearer: payantState.fee_bearer,\n          items: payantState.items,\n          tokenize: payantState.tokenize,\n          payment_methods: payantState.payment_methods,\n          callback: (response) => {\n            payantState.callback(response);\n          },\n          onClose: () => {\n            payantState.close();\n          },\n        };\n        Object.freeze(payantOptions);\n        const handler = window.Payant.invoice(payantOptions);\n        handler.openIframe();\n      });\n  }, [payantState]);\n\n  const loadScript = (callback) => {\n    const script = document.createElement('script');\n    script.src = 'https://api.payant.ng/assets/js/inline.min.js';\n    document.getElementsByTagName('head')[0].appendChild(script);\n    if (script.readyState) {\n      // IE\n      script.onreadystatechange = () => {\n        if (script.readyState === 'loaded' || script.readyState === 'complete') {\n          script.onreadystatechange = null;\n          callback();\n        }\n      };\n    } else {\n      // Others\n      script.onload = () => {\n        callback();\n      };\n    }\n  };\n\n  const loadscriptAndUpdateState = useCallback(() => {\n    setPayantState({\n      ...payantState,\n      scriptLoaded: new Promise((resolve) => {\n        loadScript(() => {\n          resolve();\n        });\n      }),\n    });\n  }, [payantState]);\n\n  useEffect(\n    useCallback(() => {\n      loadscriptAndUpdateState();\n      if (payantState.scriptLoaded) {\n        payWithPayant();\n      }\n    }, [loadscriptAndUpdateState, payWithPayant, payantState.scriptLoaded]),\n    [],\n  );\n\n  return (\n    <button className={payantState.class} onClick={payWithPayant} disabled={payantState.disabled}>\n      {payantState.text}\n    </button>\n  );\n}\n\nPayant.propTypes = {\n  text: PropTypes.string,\n  class: PropTypes.string,\n  reference: PropTypes.string,\n  client: PropTypes.shape({\n    company_name: PropTypes.string,\n    first_name: PropTypes.string.isRequired,\n    last_name: PropTypes.string.isRequired,\n    email: PropTypes.string.isRequired,\n    phone: PropTypes.string.isRequired,\n    address: PropTypes.string,\n    type: PropTypes.string,\n    settlement_bank: PropTypes.string,\n    account_number: PropTypes.string,\n  }).isRequired,\n  client_id: PropTypes.string,\n  due_date: PropTypes.string.isRequired,\n  fee_bearer: PropTypes.string.isRequired,\n  items: PropTypes.arrayOf(\n    PropTypes.shape({\n      item: PropTypes.string.isRequired,\n      description: PropTypes.string.isRequired,\n      unit_cost: PropTypes.string.isRequired,\n      quantity: PropTypes.string.isRequired,\n    }),\n  ).isRequired,\n  tokenize: PropTypes.bool,\n  payment_methods: PropTypes.arrayOf(PropTypes.oneOf(['card', 'bank', 'phone', 'qr'])),\n  payantPublicKey: PropTypes.string.isRequired,\n  callback: PropTypes.func.isRequired,\n  close: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n};\n\nPayant.defaultProps = {\n  text: 'Make Payment',\n  disabled: false,\n  embed: false,\n  tokenize: false,\n  payment_methods: ['card', 'bank', 'phone', 'qr'],\n};\n\nexport default Payant;\n"]}